(function(){"use strict";(()=>{var q;const A=window.ataiConfig||{},W=y("siteKey","site-key")||window.altTextSiteKey||null,w=((q=y("lang","lang"))==null?void 0:q.toLowerCase())||null,N=function(){const t=y("keywords",null);return t?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):null}(),O=y("keywordSource",null)||null,j=A.ecommProduct?{product:A.ecommProduct,brand:A.ecommBrand}:{},U=function(){const t=y("overwrite",null)||null;return t==1||String(t).toLowerCase()==="true"}(),k=function(){const t=y("excludedElements",null)||window.ataiExcludedElements||[];return[...Array.isArray(t)?t:[],'[data-definition-name="website.components.map"]','[aria-roledescription="map"]+.gm-style']}(),S=new Map,x=`https://ujs.alttext.ai/universal/sites/${W}/images`,v=Object.freeze([{prefix:"data:image/gif",signature:"R0lGODlhAQAB"},{prefix:"data:image/png",signature:"iVBORw0KGgoAAAANSUhEUgAAAAEAAAAB"},{prefix:"data:image/webp",signature:"UklGRkAAAABXRUJQVlA4IBQAAAAB"}]);function P(t){(async function(e){const f=Array.from(document.querySelectorAll("img")).filter(i=>!p(i)),m=f.filter(i=>i.complete&&i.naturalWidth>0);let d=f.filter(i=>!i.complete||i.naturalWidth===0);if(m.length>0&&E(m,e),U&&d.length>0){const i=d.filter(a=>a.alt&&a.alt.trim().length>0);i.length>0&&E(i,e)}d.length>0&&await function(i){return new Promise(a=>{requestAnimationFrame(function n(){const u=i.filter(s=>s.naturalWidth>0);u.length>0&&(E(u,x),i=i.filter(s=>s.naturalWidth===0)),i.length>0?requestAnimationFrame(n):a()})})}(d)})(t),function(e){let f;const m=new Set;new MutationObserver(d=>{let i=0;d.forEach(a=>{const n=function(u){const s=[];return u.forEach(o=>{p(o.target)||(o.type==="childList"?o.addedNodes.forEach(r=>{if(!p(r)){if(r.nodeName==="IMG")s.push(r);else if(r.querySelectorAll){const c=r.querySelectorAll("img"),l=Array.from(c).filter(h=>!p(h));s.push(...l)}}}):o.type==="attributes"&&o.attributeName==="src"&&(o.target.nodeName!=="IMG"||p(o.target)||s.push(o.target)))}),s}([a]);n.length>0&&(n.forEach(u=>m.add(u)),i=1)}),i&&(clearTimeout(f),f=setTimeout(()=>{E(Array.from(m),e),m.clear()},400))}).observe(document.body,{childList:1,subtree:1,attributes:1,attributeFilter:["src"]})}(t)}async function E(t,e){const f=function(d){const i=new Set;return Array.from(d).filter(a=>{if(p(a))return 0;const n=L(a),u=document.body.contains(a),s=a.naturalWidth>100&&a.naturalHeight>100||a.width>100&&a.height>100,o=a.getAttribute("aria-hidden")!=="true";return function(r){return r.hidden?1:r.offsetParent?0:1}(a)||n&&function(r){if(!r||typeof r!="string")return 0;const c=r.trim(),l=c.toLowerCase();if(!l.startsWith("data:image/"))return 0;for(const{prefix:h,signature:g}of v)if(l.startsWith(h))return c.includes(g);return l.startsWith("data:image/svg+xml")?1:0}(n)||n&&!function(r){if(!r||typeof r!="string")return 0;const c=r.trim().toLowerCase(),l=c.startsWith("http://")||c.startsWith("https://");return c.startsWith("blob:")?0:l}(n)||n&&function(r){if(!r)return 0;const c=[/maps\.googleapis\.com\/maps\/vt/i,/maps\.google\.com\/maps\/vt/i,/tile\.openstreetmap\.org/i,/tiles\.mapbox\.com/i,/api\.mapbox\.com/i,/\.google-analytics\.com/i,/googletagmanager\.com/i,/doubleclick\.net/i,/facebook\.com\/tr/i];for(const l of c)if(l.test(r))return 1;return 0}(n)||!U&&a.alt&&a.alt.trim().length>0?0:S.has(n)?(function(r,c){r.alt=S.get(c)}(a,n),0):n&&!i.has(n)?(i.add(n),u&&n&&s&&o):0})}(t);if(f.length===0)return;const m=await async function(d,i){const a=d.map(o=>({url:L(o)})),n=window.location.hostname,u=await async function(o,r){const c=o.map(b=>b.url).join(""),l=`${r}:${c}`,h=w?`${l}:${w}`:l,g=new TextEncoder().encode(h),T=await crypto.subtle.digest("SHA-1",g);return Array.from(new Uint8Array(T)).map(b=>b.toString(16).padStart(2,"0")).join("")}(a,n),s=new URL(i);s.searchParams.append("req",u),s.searchParams.append("domain",n),w&&s.searchParams.append("lang",w);try{const o=await R(s.toString());return o||await async function(c,l){const h={images:l,ecomm:j,keywords:N,keyword_source:O},g=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(g.ok){const T=await g.json();return function(b){R(b).then(B=>{}).catch(B=>{})}(c),T.images||[]}throw new Error(`POST request failed with status: ${g.status}`)}(s.toString(),a)||[]}catch{return[]}}(f,e);m&&m.length>0&&function(d,i){const a=new Map(i.map(n=>{var u;return[n.url,w&&((u=n.alt_texts)==null?void 0:u[w])||n.alt_text]}));d.forEach(n=>{const u=L(n);if(a.has(u)){const s=a.get(u);(function(o,r){const c=new URL(o,window.location.origin).href;document.querySelectorAll("img").forEach(l=>{new URL(l.src,window.location.origin).href===c&&(l.alt=r)})})(u,s),S.set(u,s)}})}(f,m)}function p(t){if(!t||!t.nodeType||t.nodeType!==Node.ELEMENT_NODE||k.length===0)return 0;for(const e of k)try{if(t.closest(e)!==null)return 1}catch{}return 0}async function R(t){const e=await fetch(t,{method:"GET"});if(e.status===204)return null;if(e.status===200)return(await e.json()).images||[];throw new Error(`GET request failed with status: ${e.status}`)}function L(t){if(!t)return null;const e=t.src||t.currentSrc||null;if(!e||e.trim()==="")return null;try{return e.startsWith("http")?new URL(e).href:new URL(e,window.location.origin).href}catch{return null}}function y(t,e){if(t&&A[t])return A[t];if(e){const f=document.getElementById("alttextai-ujs");if(!f)return null;const m=f.src.split("?")[1];return m?new URLSearchParams(m).get(e):null}return null}W&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>P(x)):P(x))})()})();
